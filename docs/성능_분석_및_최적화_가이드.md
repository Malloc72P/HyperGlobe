ë“œ
ë“œ
# HyperGlobe ì„±ëŠ¥ ë¶„ì„ ë° ìµœì í™” ê°€ì´ë“œ

## ğŸ“Š ì„±ëŠ¥ ë¶„ì„ ê°œìš”

### ì¸¡ì • í™˜ê²½
- **í…ŒìŠ¤íŠ¸ ê¸°ê¸°**: M1 MacBook
- **ì¸¡ì • ëŒ€ìƒ**: world-low, world-mid, world-high geo.json
- **ì¸¡ì • ì§€í‘œ**: FPS (ì´ˆë‹¹ í”„ë ˆì„ ìˆ˜), ë“œë¡œìš°ì½œ ìˆ˜, ì§€ì˜¤ë©”íŠ¸ë¦¬ ìˆ˜

### ì¸¡ì • ê²°ê³¼

#### ìµœì í™” ì „
```
world-low  (10,853 ì¢Œí‘œ): 60 fps âœ…
world-mid  (14,016 ì¢Œí‘œ): 55-60 fps âœ…
world-high (62,032 ì¢Œí‘œ): 24 fps ğŸ”´

ë“œë¡œìš°ì½œ: 4,320ê°œ
ì§€ì˜¤ë©”íŠ¸ë¦¬: 2,892ê°œ
ì‚¼ê°í˜•: 506,602ê°œ
```

**ë¬¸ì œ ìƒí™©:**
- world-mid â†’ world-highë¡œ ê°ˆ ë•Œ ì¢Œí‘œ ìˆ˜ 4.4ë°° ì¦ê°€
- FPSëŠ” 60% ê°ì†Œ (55fps â†’ 24fps)
- ì‹¬ê°í•œ ë¹„ì„ í˜•ì  ì„±ëŠ¥ ì €í•˜ ë°œìƒë“œ
- 

#### ìµœì í™” í›„ (RegionFeature ë‚´ë¶€ ë³‘í•©)
```
world-high (62,032 ì¢Œí‘œ): 58-60 fps âœ…

ë“œë¡œìš°ì½œ: 512ê°œ (88% ê°ì†Œ)
ì§€ì˜¤ë©”íŠ¸ë¦¬: 548ê°œ (81% ê°ì†Œ)
ì‚¼ê°í˜•: ì•½ 170,000ê°œ (ì¶”ì •, 66% ê°ì†Œ)
```

**ê°œì„  íš¨ê³¼:**
- FPS: 24 â†’ 58~60 (+142% í–¥ìƒ)
- ë“œë¡œìš°ì½œ: 4,320 â†’ 512 (88% ê°ì†Œ)
- ì§€ì˜¤ë©”íŠ¸ë¦¬: 2,892 â†’ 548 (81% ê°ì†Œ)

---

## ğŸ” GeoJSON ë°ì´í„° ë¶„ì„

### íŒŒì¼ë³„ í†µê³„
| íŒŒì¼ | í”¼ì²˜ ìˆ˜ | ì´ ì¢Œí‘œ ìˆ˜ | ë§(Ring) ìˆ˜ | í‰ê·  ë§ë‹¹ ì¢Œí‘œ | íŒŒì¼ í¬ê¸° |
|------|---------|-----------|------------|---------------|----------|
| world-low | 256 | 10,853 | 401 | 27 | 0.25MB |
| world-mid | 256 | 14,016 | 459 | 31 | 0.30MB |
| world-high | 256 | 62,032 | 1,435 | 43 | 1.16MB |

### ì£¼ìš” íŠ¹ì§•
- **í”¼ì²˜ ìˆ˜**: ëª¨ë‘ ë™ì¼ (256ê°œ êµ­ê°€)
- **ì¢Œí‘œ ë°€ë„**: highëŠ” low ëŒ€ë¹„ **5.7ë°°** ë” ë§ì€ ì¢Œí‘œ
- **ë§ ë³µì¡ë„**: highëŠ” low ëŒ€ë¹„ **3.6ë°°** ë” ë§ì€ ë§
- **ìµœëŒ€ ë³µì¡ êµ­ê°€**: ìºë‚˜ë‹¤ (world-highì—ì„œ 5,422ê°œ ì¢Œí‘œ)

---

## ğŸ”´ ì„±ëŠ¥ ë³‘ëª© ì§€ì  ë¶„ì„ (ìµœì í™” ì „)

### 1. ëŸ°íƒ€ì„ ì‚¼ê°ë¶„í•  (Critical âš ï¸âš ï¸âš ï¸)

**ë¬¸ì œ êµ¬í˜„:**
```tsx
// PolygonFeature.tsx - ê° ë§ë§ˆë‹¤ ê°œë³„ ì‚¼ê°ë¶„í• 
const fillGeometry = useMemo(() => {
  const { vertices, indices } = triangulatePolygon({
    coordinates: polygons,
    radius: fillRadius,
    gridSpacing: 3,
    densifyBoundary: true,
  });
  // BufferGeometry ìƒì„±...
}, [polygons, gridSpacing, densifyBoundary]);
```

**ë¬¸ì œì :**
- 1,435ê°œ ë§(world-high) ê°ê°ì— ëŒ€í•´ **ë¸Œë¼ìš°ì €ì—ì„œ** Delaunay ì‚¼ê°ë¶„í•  ìˆ˜í–‰
- ì´ˆê¸° ë¡œë”© ì‹œê°„: 3~7ì´ˆ
- UI ë¸”ë¡œí‚¹ ë°œìƒ
- 506,602ê°œ ì‚¼ê°í˜• ìƒì„± â†’ GPU ë©”ëª¨ë¦¬ ë¶€ë‹´

**ì˜í–¥ë„:** â­â­â­â­â­

---

### 2. ê³¼ë„í•œ ë“œë¡œìš°ì½œ (Draw Call Overhead) - âœ… í•´ê²°ë¨

**ë¬¸ì œ êµ¬í˜„:**
```tsx
// RegionFeature.tsx - ê° ë§ë§ˆë‹¤ ë³„ë„ ì»´í¬ë„ŒíŠ¸
{featurePolygons.map((polygon, i) => (
  <PolygonFeature key={i} polygons={polygon} ... />
))}

// PolygonFeature.tsx - ê° í´ë¦¬ê³¤ë§ˆë‹¤
<LineFeature ... />  // ë“œë¡œìš°ì½œ 1
<mesh ... />         // ë“œë¡œìš°ì½œ 1
```

**ë¬¸ì œì :**
- world-high: 1,435ê°œ ë§ â†’ **ìµœì†Œ 2,870ê°œ ë“œë¡œìš°ì½œ**
- ì‹¤ì œ ì¸¡ì •: 4,320ê°œ ë“œë¡œìš°ì½œ (ì™¸ê³½ì„ , ê·¸ë¦¼ì ë“± í¬í•¨)
- ê¶Œì¥ì¹˜(200)ì˜ 21ë°° ì´ˆê³¼

**í•´ê²° ë°©ë²•:** âœ… RegionFeature ë‚´ë¶€ì—ì„œ ë§ ë³‘í•©
```tsx
// RegionFeature.tsx - ìµœì í™”ëœ êµ¬í˜„
const regionFeatureGeometry = useMemo(() => {
  if (!meshSource) return;
  
  // ëª¨ë“  ë§ì˜ geometryë¥¼ í•˜ë‚˜ë¡œ ë³‘í•©
  const geometry = mergeGeometries(meshSource);
  
  return { geometry };
}, [meshSource]);

// ê²°ê³¼: êµ­ê°€ë‹¹ 1ê°œ mesh = 256ê°œ ë“œë¡œìš°ì½œ
```

**ê°œì„  íš¨ê³¼:**
- ë“œë¡œìš°ì½œ: 4,320 â†’ 512 (88% ê°ì†Œ)
- ì§€ì˜¤ë©”íŠ¸ë¦¬: 2,892 â†’ 548 (81% ê°ì†Œ)
- FPS: 24 â†’ 58~60 (+142% í–¥ìƒ)

**ì˜í–¥ë„:** â­â­â­â­â­ (í•´ê²°ë¨)

---

### 3. ì™¸ê³½ì„  ë Œë”ë§ ìµœì í™” - âœ… í•´ê²°ë¨

**ë¬¸ì œ êµ¬í˜„:**
```tsx
// ê° ë§ë§ˆë‹¤ ë³„ë„ LineFeature
{featurePolygons.map((polygon, i) => (
  <LineFeature coordinates={polygon} ... />
))}
```

**í•´ê²° ë°©ë²•:** âœ… LineSegmentsë¡œ ë³‘í•©
```tsx
const boundaryGeometry = useMemo(() => {
  const positions: number[] = [];
  
  // ëª¨ë“  ë§ì„ í•˜ë‚˜ì˜ LineSegmentsë¡œ ë³‘í•©
  for (const polygon of featurePolygons) {
    const projectedPoints = OrthographicProj.projects(polygon, fillRadius);
    
    for (let i = 0; i < projectedPoints.length; i++) {
      const [x1, y1, z1] = projectedPoints[i];
      const nextIndex = (i + 1) % projectedPoints.length;
      const [x2, y2, z2] = projectedPoints[nextIndex];
      
      positions.push(x1, y1, z1);
      positions.push(x2, y2, z2);
    }
  }
  
  const geometry = new THREE.BufferGeometry();
  geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
  
  return geometry;
}, [featurePolygons]);

<lineSegments geometry={boundaryGeometry}>
  <lineBasicMaterial />
</lineSegments>
```

**ì¥ì :**
- ë©€í‹°í´ë¦¬ê³¤ ì™„ë²½ ì§€ì› (ë–¨ì–´ì§„ ì„¬ë“¤ ê°ê° ë‹«íŒ ë£¨í”„)
- êµ­ê°€ë‹¹ 1ê°œ ë“œë¡œìš°ì½œ
- 256ê°œ ë¼ì¸ ë“œë¡œìš°ì½œ â†’ íš¨ìœ¨ì 

**ì˜í–¥ë„:** â­â­â­â­ (í•´ê²°ë¨)

---

### 4. í¬ì¸í„° ì´ë²¤íŠ¸ ë ˆì´ìºìŠ¤íŠ¸ ë¹„ìš© âš ï¸âš ï¸âš ï¸

**í˜„ì¬ êµ¬í˜„:**
```tsx
// RegionFeature.tsx - í˜„ì¬ ì£¼ì„ ì²˜ë¦¬ë¨
<group
  // onPointerEnter={(e) => { 
  //   setHovered(true);
  //   setHoveredRegion(regionModel);
  // }}
  // onPointerLeave={(e) => { 
  //   setHovered(false);
  //   setHoveredRegion(null);
  // }}
>
```

**ë¬¸ì œì :**
ë“œë¡œìš°ì½œ ë³‘í•© ìµœì í™”ê°€ ì˜¤íˆë ¤ ë ˆì´ìºìŠ¤íŠ¸ ì„±ëŠ¥ì„ ì•…í™”ì‹œí‚´!

**ìµœì í™” ì „ (1,435ê°œ ê°œë³„ ì§€ì˜¤ë©”íŠ¸ë¦¬):**
```
- ê° ì§€ì˜¤ë©”íŠ¸ë¦¬: í‰ê·  350ê°œ ì‚¼ê°í˜•
- R3F ë‚´ë¶€ ìµœì í™”: BVH(Bounding Volume Hierarchy)ë¡œ ì‚¬ì „ í•„í„°ë§
- ì‹¤ì œ ê²€ì‚¬: ë§ˆìš°ìŠ¤ ê·¼ì²˜ 5-10ê°œ ì§€ì˜¤ë©”íŠ¸ë¦¬ë§Œ
- ê²€ì‚¬ ì‚¼ê°í˜• ìˆ˜: ~10 Ã— 350 = 3,500ê°œ
```

**ìµœì í™” í›„ (256ê°œ ë³‘í•©ëœ ì§€ì˜¤ë©”íŠ¸ë¦¬):**
```
- ê° ì§€ì˜¤ë©”íŠ¸ë¦¬: í‰ê·  1,979ê°œ ì‚¼ê°í˜• (506,602 Ã· 256)
- Bounding Box í¬ê¸° ì¦ê°€ â†’ ë” ë§ì€ í›„ë³´ ì„ ì •
- ì‹¤ì œ ê²€ì‚¬: ë§ˆìš°ìŠ¤ ê·¼ì²˜ 10ê°œ ì§€ì˜¤ë©”íŠ¸ë¦¬
- ê²€ì‚¬ ì‚¼ê°í˜• ìˆ˜: ~10 Ã— 1,979 = 19,790ê°œ
â†’ ë ˆì´ìºìŠ¤íŠ¸ ì—°ì‚°ëŸ‰ 5.6ë°° ì¦ê°€!
```

**ì„±ëŠ¥ ì˜í–¥:**
```
ë§¤ í”„ë ˆì„ onPointerMove ë°œìƒ ì‹œ:
60 FPS Ã— 256 ì§€ì˜¤ë©”íŠ¸ë¦¬ = ì´ˆë‹¹ 15,360íšŒ ë ˆì´ìºìŠ¤íŠ¸
ê° ë ˆì´ìºìŠ¤íŠ¸: í‰ê·  1,979ê°œ ì‚¼ê°í˜• ê²€ì‚¬

ì´ ì—°ì‚°: 15,360 Ã— 1,979 â‰ˆ 30,000,000 ì‚¼ê°í˜• êµì°¨ ê²€ì‚¬/ì´ˆ
â†’ ë©”ì¸ ìŠ¤ë ˆë“œ ì‹¬ê°í•œ ë¸”ë¡œí‚¹ ë°œìƒ
```

**Three.js Raycaster ë‚´ë¶€ ë™ì‘:**
```javascript
function raycast(raycaster, intersects) {
  // 1ë‹¨ê³„: Bounding Box ì²´í¬ (ë¹ ë¦„)
  if (!ray.intersectsBox(boundingBox)) return;
  
  // 2ë‹¨ê³„: ëª¨ë“  ì‚¼ê°í˜•ê³¼ êµì°¨ ê²€ì‚¬ (ëŠë¦¼!)
  for (let i = 0; i < triangleCount; i++) {
    if (ray.intersectsTriangle(triangle)) {
      intersects.push(intersection);
    }
  }
}
```

**ì™œ ì´ì „ì—” ëª°ëì„ê¹Œ?**
- ìµœì í™” ì „: ì´ˆê¸° ë¡œë”© ì‹œ 3-7ì´ˆê°„ UI ë¸”ë¡œí‚¹
- ì‚¼ê°ë¶„í• ì´ ë„ˆë¬´ ëŠë ¤ì„œ í¬ì¸í„° ì´ë²¤íŠ¸ í…ŒìŠ¤íŠ¸ ë¶ˆê°€
- ë³‘í•© í›„ì—ì•¼ ë¹„ë¡œì†Œ ë“œëŸ¬ë‚œ ë¬¸ì œ

**ì˜í–¥ë„:** â­â­â­â­â­ (í˜„ì¬ ì£¼ì„ ì²˜ë¦¬ë¡œ íšŒí”¼ ì¤‘)

---

## ğŸ“ˆ ì„±ëŠ¥ ì¶”ì •ì¹˜

### í˜„ì¬ ë Œë”ë§ ë¹„ìš© (world-high ê¸°ì¤€)
```
ì…ë ¥ ì¢Œí‘œ ìˆ˜:     26,316
ê²©ì ê°„ê²©:        3ë„ (ê¸°ë³¸ê°’)
ìƒì„±ëœ ê²©ìì :    ì•½ 100,000+
ìƒì„±ëœ ì‚¼ê°í˜•:    ì•½ 180,000+ (ì „ì²´ 256ê°œ êµ­ê°€ í•©ì‚°)
ë“œë¡œìš°ì½œ ìˆ˜:      1,300+
ë©”ì‰¬ ìˆ˜:          256+
```

### M1 MacBook ì„±ëŠ¥ íŒë‹¨
- M1 í†µí•© GPUëŠ” 180k ì‚¼ê°í˜• ì •ë„ëŠ” ì²˜ë¦¬ ê°€ëŠ¥
- ê·¸ëŸ°ë°ë„ 40fps â†’ **JavaScript CPU ë³‘ëª© + ë“œë¡œìš°ì½œ ë³‘ëª©**
- ìˆœìˆ˜ GPU ë Œë”ë§ ë¶€í•˜ê°€ ì•„ë‹˜

---

## âœ… ìµœì¢… íŒë‹¨

### ğŸ¯ í˜„ì¬ 40fpsëŠ” ìµœì í™” í•„ìš”í•œ ìƒí™©

**ì´ìœ :**
1. âŒ ë°ì´í„° í•´ìƒë„ì˜ í•œê³„ê°€ ì•„ë‹˜
2. âœ… êµ¬í˜„ ë°©ì‹ì˜ ë¬¸ì œ
3. âœ… ìµœì í™”ë¡œ ì¶©ë¶„íˆ 60fps ë‹¬ì„± ê°€ëŠ¥

**ê·¼ê±°:**
- M1 MacBookì€ ì´ ì •ë„ ê·œëª¨ì˜ 3D ë Œë”ë§ì„ 60fpsë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì„±ëŠ¥
- ì£¼ìš” ë³‘ëª©ì€ **ëŸ°íƒ€ì„ ì‚¼ê°ë¶„í• (CPU)ê³¼ ê³¼ë„í•œ ë“œë¡œìš°ì½œ**
- ë¹„ìŠ·í•œ ê·œëª¨ì˜ ìµœì í™”ëœ 3D ì§€ë„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì€ 60fps ë‹¬ì„±

---

## âœ… ì ìš©ëœ ìµœì í™”

### RegionFeature ë‚´ë¶€ ë³‘í•© ìµœì í™” â­â­â­â­â­ (ì™„ë£Œ)

**êµ¬í˜„ ë‚´ìš©:**

1. **ë©”ì‰¬ ë³‘í•©**
```tsx
// ì—¬ëŸ¬ ê°œì˜ ë§ì„ í•˜ë‚˜ì˜ meshë¡œ ë³‘í•©
const regionFeatureGeometry = useMemo(() => {
  const geometries: THREE.BufferGeometry[] = [];
  
  for (const polygon of featurePolygons) {
    const { vertices, indices } = triangulatePolygon({...});
    const geometry = new THREE.BufferGeometry();
    // ... geometry ìƒì„±
    geometries.push(geometry);
  }
  
  // ë³‘í•©!
  return mergeGeometries(geometries);
}, [meshSource]);
```

2. **ì™¸ê³½ì„  ë³‘í•©**
```tsx
// ëª¨ë“  ë§ì˜ ì™¸ê³½ì„ ì„ í•˜ë‚˜ì˜ lineSegmentsë¡œ ë³‘í•©
const boundaryGeometry = useMemo(() => {
  const positions: number[] = [];
  
  for (const polygon of featurePolygons) {
    // ê° ë§ì„ ë…ë¦½ì ì¸ ë‹«íŒ ë£¨í”„ë¡œ ì²˜ë¦¬
    const projectedPoints = OrthographicProj.projects(polygon, fillRadius);
    
    for (let i = 0; i < projectedPoints.length; i++) {
      // ì„ ë¶„ ì¶”ê°€ (ë©€í‹°í´ë¦¬ê³¤ ì§€ì›)
      positions.push(...);
    }
  }
  
  return new THREE.BufferGeometry().setAttribute('position', ...);
}, [featurePolygons]);
```

**ë‹¬ì„± íš¨ê³¼:**
- âœ… ë“œë¡œìš°ì½œ: 2,055 â†’ 512 (75% ê°ì†Œ)
- âœ… ì§€ì˜¤ë©”íŠ¸ë¦¬: 1,382 â†’ 548 (60% ê°ì†Œ)
- âœ… FPS: 40 â†’ 58~60 (45% í–¥ìƒ)
- âœ… ê°œë³„ êµ­ê°€ë³„ hover/ìŠ¤íƒ€ì¼ ë³€ê²½ ê°€ëŠ¥ ìœ ì§€
- âœ… ë§µì°¨íŠ¸ë¡œì„œì˜ ë™ì  ê¸°ëŠ¥ ë³´ì¡´

**í•µì‹¬ ì´ì :**
- êµ­ê°€ë³„ ë…ë¦½ì ì¸ mesh ìœ ì§€ â†’ hover, ìƒ‰ìƒ ë³€ê²½ ê°€ëŠ¥
- ë‚´ë¶€ ë§ë“¤ë§Œ ë³‘í•© â†’ API ë³€ê²½ ì—†ìŒ
- ë©€í‹°í´ë¦¬ê³¤ ì™„ë²½ ì§€ì›
- ì‚¬ìš©ì ì½”ë“œ ë³€ê²½ ë¶ˆí•„ìš”

---

## ğŸš€ ì¶”ê°€ ìµœì í™” ê¶Œì¥ì‚¬í•­

### Priority 1: ë¹Œë“œ íƒ€ì„ ì „ì²˜ë¦¬ ë° HGM í¬ë§· â­â­â­â­â­

**ê¸°ëŒ€ íš¨ê³¼:**
- ì´ˆê¸° ë¡œë”©: 2-7ì´ˆ â†’ 0.3ì´ˆ (ì•½ 25ë°° ë¹ ë¦„)
- íŒŒì¼ í¬ê¸°: 1.16MB â†’ 0.8MB (30% ê°ì†Œ, gzip)
- CPU/GPU ë¶€í•˜ ìµœì†Œí™”
- ì‚¬ìš©ì ê²½í—˜ ê·¹ëŒ€í™”

---

#### **í•µì‹¬ ì•„ì´ë””ì–´: HGM (HyperGlobe Map) í¬ë§·**

GeoJSON ëŒ€ì‹  ì´ë¯¸ ì „ì²˜ë¦¬ëœ ì´ì§„ íŒŒì¼ ì œê³µ:

```
ê¸°ì¡´ ë°©ì‹:
GeoJSON â†’ ë¸Œë¼ìš°ì € â†’ ì‚¼ê°ë¶„í• (2-7ì´ˆ) â†’ ì¢Œí‘œë³€í™˜(0.5ì´ˆ) â†’ ë Œë”ë§

HGM ë°©ì‹:
HGM íŒŒì¼ â†’ ë¸Œë¼ìš°ì € â†’ BufferGeometry ìƒì„±(0.1ì´ˆ) â†’ ë Œë”ë§
```

**HGM íŒŒì¼ êµ¬ì¡°:**
```typescript
interface HGMFile {
  version: string;
  metadata: {
    name: string;
    featureCount: number;
    triangleCount: number;
    boundingBox: [minLon, minLat, maxLon, maxLat];
  };
  features: HGMFeature[];
}

interface HGMFeature {
  id: string;
  properties: Record<string, any>;
  
  // ë©”ì‰¬ (ì´ë¯¸ ì‚¼ê°ë¶„í•  ì™„ë£Œ)
  mesh: {
    vertices: Float32Array;  // [x,y,z, ...]
    indices: Uint32Array;    // [0,1,2, ...]
  };
  
  // ì™¸ê³½ì„  (ì´ë¯¸ êµ¬ì²´ì— íˆ¬ì˜ë¨)
  boundaries: {
    positions: Float32Array; // [x1,y1,z1, x2,y2,z2, ...]
  };
  
  // ê³µê°„ ì¸ë±ì‹±ìš©
  bbox: BoundingBox;
}
```

---

#### **êµ¬í˜„ ë°©ì•ˆ**

**1. CLI ë„êµ¬ ì œê³µ**
```bash
# npm íŒ¨í‚¤ì§€ë¡œ ì œê³µ
npm install -g @hyperglobe/cli

# GeoJSON â†’ HGM ë³€í™˜
hyperglobe convert ./my-map.geo.json ./output/my-map.hgm \
  --quality=high \
  --grid-spacing=3 \
  --compress
```

**2. ì‚¬ì „ ì œì‘ëœ ë§µ íŒ© ì œê³µ**
```
@hyperglobe/maps:
â”œâ”€â”€ world-low.hgm       (200 KB)
â”œâ”€â”€ world-mid.hgm       (400 KB)
â”œâ”€â”€ world-high.hgm      (800 KB)
â”œâ”€â”€ asia.hgm
â”œâ”€â”€ europe.hgm
â””â”€â”€ ...
```

**3. ì‚¬ìš©ì API ê°„ì†Œí™”**
```typescript
// ê¸°ì¡´: ì‚¬ìš©ìê°€ ì§ì ‘ RegionFeature ìƒì„±
import geoJson from './data/world-high.geo.json';

<HyperGlobe>
  {geoJson.features.map(feature => (
    <RegionFeature key={feature.id} feature={feature} />
  ))}
</HyperGlobe>

// ê°œì„ : HGM íŒŒì¼ë§Œ ì „ë‹¬
import worldHigh from '@hyperglobe/maps/world-high.hgm';

<HyperGlobe mapData={worldHigh} />
// RegionFeature ìë™ ìƒì„±ë¨!
```

**4. ì´ì§„ ì§ë ¬í™”**
```
HGM ì´ì§„ íŒŒì¼ êµ¬ì¡°:

[Header - 64 bytes]
- Magic: "HGM\0" (4 bytes)
- Version: "1.0.0" (12 bytes)
- Feature count (4 bytes)
- Triangle count (4 bytes)
- Metadata length (4 bytes)

[Metadata - variable]
- JSON (name, bbox, etc.)

[Features - variable]
- Feature 1: ID, Properties, Vertices, Indices, Boundaries, BBox
- Feature 2: ...
- ...

[ì••ì¶•]
- gzipìœ¼ë¡œ ìµœì¢… ì••ì¶•
```

---

#### **ì„±ëŠ¥ ë¹„êµ**

| í•­ëª© | í˜„ì¬ (GeoJSON) | HGM í¬ë§· | ê°œì„ ìœ¨ |
|------|---------------|----------|--------|
| **íŒŒì¼ í¬ê¸°** | 1.16MB | 0.8MB | 30% ê°ì†Œ |
| **íŒŒì‹± ì‹œê°„** | 100ms | 50ms | 50% ê°œì„  |
| **ì‚¼ê°ë¶„í• ** | 2-7ì´ˆ | 0ms | 100% ì œê±° |
| **ì¢Œí‘œ ë³€í™˜** | 300-500ms | 0ms | 100% ì œê±° |
| **BufferGeometry** | 500ms | 100ms | 80% ê°œì„  |
| **ì´ ë¡œë”© ì‹œê°„** | 3-8ì´ˆ | 0.3ì´ˆ | **95% ê°œì„ ** |

---

#### **ì™œ BufferGeometryëŠ” ë¯¸ë¦¬ ê³„ì‚° ì•ˆí•˜ë‚˜?**

**ê¸°ìˆ ì  ë¶ˆê°€ëŠ¥:**
```typescript
// âŒ BufferGeometryëŠ” ëŸ°íƒ€ì„ ê°ì²´
class BufferGeometry {
  _gl: WebGLRenderingContext;  // ë¸Œë¼ìš°ì € ì»¨í…ìŠ¤íŠ¸
  _buffers: WebGLBuffer[];     // GPU í•¸ë“¤
  // â†’ íŒŒì¼ë¡œ ì§ë ¬í™” ë¶ˆê°€ëŠ¥!
}

// âœ… ì €ì¥ ê°€ëŠ¥: Raw ë°ì´í„°ë§Œ
{
  vertices: Float32Array,  // ìˆœìˆ˜ ìˆ«ì ë°°ì—´
  indices: Uint32Array,    // ìˆœìˆ˜ ìˆ«ì ë°°ì—´
}

// ëŸ°íƒ€ì„ì—ì„œ ë³µì› (ë§¤ìš° ë¹ ë¦„: ~15ms)
const geometry = new THREE.BufferGeometry();
geometry.setAttribute('position', new BufferAttribute(vertices, 3));
geometry.setIndex(new BufferAttribute(indices, 1));
geometry.computeVertexNormals(); // GPU ë³‘ë ¬ ê³„ì‚°, ~10ms
```

**normalsë¥¼ ì €ì¥í•˜ë©´?**
```
ì˜µì…˜ A: normals ëŸ°íƒ€ì„ ê³„ì‚° (ê¶Œì¥)
- íŒŒì¼: 0.8MB
- ë‹¤ìš´ë¡œë“œ: 100ms
- computeVertexNormals: 10ms
- ì´: 110ms

ì˜µì…˜ B: normalsë„ ì €ì¥
- íŒŒì¼: 1.2MB (+50%)
- ë‹¤ìš´ë¡œë“œ: 150ms (+50ms)
- computeVertexNormals: 0ms
- ì´: 150ms (ë” ëŠë¦¼!)

ê²°ë¡ : ë„¤íŠ¸ì›Œí¬ ë¹„ìš© > ê³„ì‚° ë¹„ìš©
```

---

#### **ì¥ì **

1. **ê·¹í•œì˜ ì„±ëŠ¥**
   - ë¡œë”© ì‹œê°„ 25ë°° ê°œì„ 
   - ëª¨ë“  ê¸°ê¸°ì—ì„œ ì¼ê´€ëœ ë¹ ë¥¸ ì†ë„
   
2. **íŒŒì¼ í¬ê¸° ê°ì†Œ**
   - ì´ì§„ í¬ë§· + gzip ì••ì¶•
   - 30% í¬ê¸° ê°ì†Œ
   
3. **ì‚¬ìš©ì í¸ì˜ì„±**
   - í•œ ì¤„ë¡œ ë§µ ë¡œë“œ
   - RegionFeature ìë™ ìƒì„±
   
4. **í™•ì¥ì„±**
   - CLIë¡œ ì»¤ìŠ¤í…€ ë§µ ì œì‘
   - ë§µ íŒ© ìƒíƒœê³„ êµ¬ì¶•
   
5. **í”„ë¡œë•ì…˜ ë ˆë””**
   - ì‹¤ì œ í”„ë¡œë•íŠ¸ ìˆ˜ì¤€ì˜ ì™„ì„±ë„

---

#### **ë‹¨ì  ë° íŠ¸ë ˆì´ë“œì˜¤í”„**

1. **ë¹Œë“œ ì‹œìŠ¤í…œ ë³µì¡ë„ ì¦ê°€**
   - ì „ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸ í•„ìš”
   - CI/CDì— ì „ì²˜ë¦¬ ë‹¨ê³„ ì¶”ê°€
   
2. **ë””ë²„ê¹… ì–´ë ¤ì›€**
   - ì´ì§„ íŒŒì¼ì€ ì§ì ‘ í™•ì¸ ë¶ˆê°€
   - ê°œë°œ ì¤‘ì—” GeoJSON ì‚¬ìš© ê¶Œì¥
   
3. **ì´ˆê¸° êµ¬í˜„ ë¹„ìš©**
   - CLI ë„êµ¬ ê°œë°œ
   - ì§ë ¬í™”/ì—­ì§ë ¬í™” êµ¬í˜„
   - ì•½ 1-2ì£¼ ê°œë°œ ì‹œê°„
   
4. **API ë³€ê²½**
   - ê¸°ì¡´ ì‚¬ìš©ì ì½”ë“œ ìˆ˜ì • í•„ìš”
   - ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ ì œê³µ í•„ìš”

---

#### **êµ¬í˜„ ìš°ì„ ìˆœìœ„**

**Phase 1: ê¸°ë³¸ ì „ì²˜ë¦¬** (1ì£¼)
- [ ] ì „ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- [ ] HGM í¬ë§· ì •ì˜
- [ ] ì§ë ¬í™”/ì—­ì§ë ¬í™” êµ¬í˜„
- [ ] world-low/mid/high.hgm ìƒì„±

**Phase 2: API ê°œì„ ** (3ì¼)
- [ ] HyperGlobe mapData prop ì¶”ê°€
- [ ] ìë™ RegionFeature ìƒì„±
- [ ] ë¡œë”© ìƒíƒœ ê´€ë¦¬

**Phase 3: CLI ë„êµ¬** (1ì£¼)
- [ ] CLI íŒ¨í‚¤ì§€ ìƒì„±
- [ ] convert ëª…ë ¹ì–´ êµ¬í˜„
- [ ] ê²€ì¦ ë° ìµœì í™” ì˜µì…˜

**Phase 4: ë§µ íŒ©** (ì§„í–‰ ì¤‘)
- [ ] @hyperglobe/maps íŒ¨í‚¤ì§€
- [ ] ë‹¤ì–‘í•œ ë§µ ì œì‘
- [ ] ë¬¸ì„œí™”

---

#### **ê¶Œì¥ ì‚¬í•­**

**í˜„ì¬ ìƒíƒœ:**
- í¬ì¸í„° ì´ë²¤íŠ¸ ìµœì í™”ê°€ ë” ì‹œê¸‰ (ê¸°ëŠ¥ ë³µì›)
- HGM í¬ë§·ì€ í›„ìˆœìœ„

**ì ìš© ì‹œê¸°:**
1. ë¨¼ì €: í¬ì¸í„° ì´ë²¤íŠ¸ ìµœì í™” (ê²½ìœ„ë„ ê¸°ë°˜)
2. ê·¸ ë‹¤ìŒ: HGM í¬ë§· êµ¬í˜„
3. ë§ˆì§€ë§‰: CLI ë„êµ¬ ë° ë§µ íŒ©

---

### Priority 2: ì „ì²´ ë©”ì‰¬ ë³‘í•© (ì„ íƒì ) â­â­â­

**í˜„ì¬ ìƒíƒœ:**
- RegionFeature ë‚´ë¶€ ë³‘í•©ìœ¼ë¡œ ì´ë¯¸ 512 ë“œë¡œìš°ì½œ ë‹¬ì„±
- 60fps ìœ ì§€ ê°€ëŠ¥
- êµ­ê°€ë³„ ì œì–´ ê°€ëŠ¥

**ì¶”ê°€ ìµœì í™” ê°€ëŠ¥ (í•„ìš”ì‹œ):**
ëª¨ë“  êµ­ê°€ë¥¼ í•˜ë‚˜ì˜ ë©”ì‰¬ë¡œ ë³‘í•©í•˜ë©´ ë“œë¡œìš°ì½œì„ 1~2ê°œë¡œ ì¤„ì¼ ìˆ˜ ìˆìœ¼ë‚˜, ë‹¤ìŒ ì œì•½ì‚¬í•­ì´ ìˆìŒ:

**íŠ¸ë ˆì´ë“œì˜¤í”„:**
- âœ… ë“œë¡œìš°ì½œ 512 â†’ 1~2ê°œ
- âš ï¸ **êµ­ê°€ë³„ hover ë¶ˆê°€** (Face Index ë§¤í•‘ í•„ìš”)
- âš ï¸ **ë™ì  ìƒ‰ìƒ ë³€ê²½ ë³µì¡** (Vertex Color ë˜ëŠ” Custom Shader í•„ìš”)
- âš ï¸ **ë§µì°¨íŠ¸ ê¸°ëŠ¥ ì œì•½** (ë°ì´í„° ë°”ì¸ë”© ë°©ì‹ ë³€ê²½ í•„ìš”)

**ê²°ë¡ :** 
í˜„ì¬ ì„±ëŠ¥(58-60fps)ì´ ì¶©ë¶„í•˜ë¯€ë¡œ **ì ìš© ë¶ˆí•„ìš”**. 
ë§µì°¨íŠ¸ë¡œì„œì˜ ìœ ì—°ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ë” ì¤‘ìš”í•¨.

---

### Priority 3: í¬ì¸í„° ì´ë²¤íŠ¸ ìµœì í™” â­â­â­â­â­

**ê¸°ëŒ€ íš¨ê³¼:**
- ë§ˆìš°ìŠ¤ í˜¸ë²„ ê¸°ëŠ¥ ë³µì›
- ë ˆì´ìºìŠ¤íŠ¸ ë¹„ìš© 90% ì´ìƒ ê°ì†Œ
- ë§µì°¨íŠ¸ì˜ í•µì‹¬ ì¸í„°ë™ì…˜ êµ¬í˜„

**í˜„ì¬ ìƒíƒœ:**
- í¬ì¸í„° ì´ë²¤íŠ¸ ì£¼ì„ ì²˜ë¦¬ë¨ (ì„±ëŠ¥ ë¬¸ì œë¡œ ë¹„í™œì„±í™”)
- êµ­ê°€ hover ê¸°ëŠ¥ ì‚¬ìš© ë¶ˆê°€
- ë§µì°¨íŠ¸ë¡œì„œ ì œí•œëœ ê¸°ëŠ¥

---

#### **ë°©ì•ˆ A: ê°„ì†Œí™”ëœ ì¶©ëŒ ê°ì§€ìš© Geometry (ì¶”ì²œ) â­â­â­â­â­**

ë³‘í•©ìœ¼ë¡œ ì¸í•œ ë ˆì´ìºìŠ¤íŠ¸ ë¶€ë‹´ì„ í•´ê²°í•˜ëŠ” ê°€ì¥ íš¨ê³¼ì ì¸ ë°©ë²•

**í•µì‹¬ ì•„ì´ë””ì–´:**
- ë Œë”ë§ìš© ë©”ì‰¬: ê³ í•´ìƒë„ (506,602 ì‚¼ê°í˜•)
- ì¶©ëŒ ê°ì§€ìš© ë©”ì‰¬: ì €í•´ìƒë„ (ì•½ 50,000 ì‚¼ê°í˜•, 90% ê°ì†Œ)

**êµ¬í˜„ ë°©ì•ˆ:**
```tsx
// RegionFeature.tsx
const collisionGeometry = useMemo(() => {
  if (!featurePolygons) return;
  
  // ê°„ì†Œí™”ëœ geometry ìƒì„± (ì™¸ê³½ì„  ê¸°ë°˜)
  const geometries: THREE.BufferGeometry[] = [];
  
  for (const polygon of featurePolygons) {
    // gridSpacingì„ í¬ê²Œ í•˜ì—¬ ì‚¼ê°í˜• ìˆ˜ ê°ì†Œ
    const { vertices, indices } = triangulatePolygon({
      coordinates: polygon,
      radius: fillRadius,
      gridSpacing: 10, // 3 â†’ 10ìœ¼ë¡œ ì¦ê°€
      densifyBoundary: false, // ê²½ê³„ ì´˜ì´˜í•˜ê²Œ ì•ˆí•¨
    });
    
    const geometry = new THREE.BufferGeometry();
    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices.flat(), 3));
    geometry.setIndex(indices);
    geometries.push(geometry);
  }
  
  return mergeGeometries(geometries);
}, [featurePolygons]);

return (
  <group>
    {/* ì¶©ëŒ ê°ì§€ ì „ìš© (invisible) */}
    <mesh 
      geometry={collisionGeometry}
      onPointerEnter={(e) => {
        e.stopPropagation();
        setHovered(true);
        setHoveredRegion(regionModel);
      }}
      onPointerLeave={(e) => {
        e.stopPropagation();
        setHovered(false);
        setHoveredRegion(null);
      }}
    >
      <meshBasicMaterial visible={false} />
    </mesh>
    
    {/* ì‹¤ì œ ë Œë”ë§ìš© (í¬ì¸í„° ì´ë²¤íŠ¸ ì—†ìŒ) */}
    <mesh geometry={regionFeatureGeometry.geometry}>
      <meshStandardMaterial ... />
    </mesh>
    
    <lineSegments geometry={regionFeatureGeometry.borderlineGeometry}>
      <lineBasicMaterial ... />
    </lineSegments>
  </group>
);
```

**ì¥ì :**
- âœ… ë ˆì´ìºìŠ¤íŠ¸ ì‚¼ê°í˜• ìˆ˜: 1,979 â†’ 200 (90% ê°ì†Œ)
- âœ… ê¸°ì¡´ RegionFeature API ì™„ì „ ìœ ì§€
- âœ… ì‚¬ìš©ì ì½”ë“œ ë³€ê²½ ë¶ˆí•„ìš”
- âœ… ì‹œê°ì  í’ˆì§ˆì€ ê·¸ëŒ€ë¡œ (ë Œë”ë§ì€ ê³ í•´ìƒë„)
- âœ… êµ¬í˜„ ê°„ë‹¨ (ê¸°ì¡´ ì½”ë“œì— ë©”ì‰¬ í•˜ë‚˜ë§Œ ì¶”ê°€)

**ë‹¨ì :**
- âš ï¸ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì•½ê°„ ì¦ê°€ (~20%)

---

#### **ë°©ì•ˆ B: Throttle + Debounce**

ë ˆì´ìºìŠ¤íŠ¸ ë¹ˆë„ë¥¼ ì¤„ì—¬ ë¶€ë‹´ ê°ì†Œ

**êµ¬í˜„ ë°©ì•ˆ:**
```tsx
// HyperGlobe.tsx
const throttledPointerMove = useThrottle({
  fn: (event) => {
    // ë ˆì´ìºìŠ¤íŠ¸ ìˆ˜í–‰
  },
  delay: 100, // 100msë§ˆë‹¤ë§Œ
});

<Canvas onPointerMove={throttledPointerMove}>
```

**ì¥ì :**
- âœ… ê°„ë‹¨í•œ êµ¬í˜„

**ë‹¨ì :**
- âš ï¸ í˜¸ë²„ ë°˜ì‘ì´ ì§€ì—°ë¨ (UX ì €í•˜)
- âš ï¸ ê·¼ë³¸ì  í•´ê²°ì±… ì•„ë‹˜

---

#### **ë°©ì•ˆ C: HTML Overlay + 2D íˆíŠ¸ í…ŒìŠ¤íŠ¸**

Canvas ìœ„ì— íˆ¬ëª…í•œ SVG/Canvas ì˜¤ë²„ë ˆì´ë¡œ ì¶©ëŒ ê°ì§€

**êµ¬í˜„ ë°©ì•ˆ:**
```tsx
// 3D â†’ 2D íˆ¬ì˜ í›„ HTML ë ˆì´ì–´ì—ì„œ íˆíŠ¸ í…ŒìŠ¤íŠ¸
<div style={{ position: 'relative' }}>
  <Canvas>
    {/* 3D ë Œë”ë§ë§Œ */}
  </Canvas>
  
  <svg style={{ position: 'absolute', top: 0, pointerEvents: 'all' }}>
    {countries.map(country => (
      <path
        key={country.id}
        d={project3DTo2D(country.geometry)}
        fill="transparent"
        onMouseEnter={() => setHovered(country)}
        onMouseLeave={() => setHovered(null)}
      />
    ))}
  </svg>
</div>
```

**ì¥ì :**
- âœ… ê°€ì¥ ë¹ ë¥¸ ì„±ëŠ¥ (2D íˆíŠ¸ í…ŒìŠ¤íŠ¸)
- âœ… CSS ì• ë‹ˆë©”ì´ì…˜ í™œìš© ê°€ëŠ¥

**ë‹¨ì :**
- âš ï¸ 3D â†’ 2D íˆ¬ì˜ ë™ê¸°í™” ë³µì¡
- âš ï¸ ì§€êµ¬ë³¸ íšŒì „ ì‹œ ì¬ê³„ì‚° í•„ìš”
- âš ï¸ êµ¬í˜„ ë‚œì´ë„ ë†’ìŒ

---

#### **ë°©ì•ˆ D: Spatial Index (R-tree)**

ë ˆì´ìºìŠ¤íŠ¸ ì „ í›„ë³´êµ° í•„í„°ë§

**êµ¬í˜„ ë°©ì•ˆ:**
```tsx
import RBush from 'rbush';

const spatialIndex = useMemo(() => {
  const tree = new RBush();
  const items = features.map(feature => {
    const bbox = calculateBoundingBox(feature);
    return {
      minX: bbox.min.x, minY: bbox.min.y,
      maxX: bbox.max.x, maxY: bbox.max.y,
      countryId: feature.id
    };
  });
  tree.load(items);
  return tree;
}, [features]);

// ë§ˆìš°ìŠ¤ ìœ„ì¹˜ â†’ í›„ë³´ í•„í„°ë§ â†’ ë ˆì´ìºìŠ¤íŠ¸
const handlePointerMove = (e) => {
  const mousePos = getMouseWorldPosition(e);
  
  // 1ë‹¨ê³„: R-treeë¡œ ë¹ ë¥¸ í•„í„°ë§ (ìˆ˜ Î¼s)
  const candidates = spatialIndex.search({
    minX: mousePos.x - 0.01, maxX: mousePos.x + 0.01,
    minY: mousePos.y - 0.01, maxY: mousePos.y + 0.01
  });
  
  // 2ë‹¨ê³„: í›„ë³´êµ°ë§Œ ë ˆì´ìºìŠ¤íŠ¸ (256 â†’ 2-3ê°œ)
  candidates.forEach(candidate => {
    raycaster.intersectObject(candidate.mesh);
  });
};
```

**ì¥ì :**
- âœ… ë ˆì´ìºìŠ¤íŠ¸ ëŒ€ìƒ: 256ê°œ â†’ 2-3ê°œ
- âœ… ì •í™•í•œ ì¶©ëŒ ê°ì§€

**ë‹¨ì :**
- âš ï¸ êµ¬í˜„ ë³µì¡
- âš ï¸ íšŒì „/ì¤Œ ì‹œ ì¢Œí‘œ ë³€í™˜ í•„ìš”

---

#### **ê¶Œì¥ ì ìš© ìˆœì„œ**

1. **1ë‹¨ê³„: ë°©ì•ˆ A (ê°„ì†Œí™” ì¶©ëŒ ë©”ì‰¬)** â† ë¨¼ì € ì´ê²ƒë¶€í„°!
   - ê°€ì¥ íš¨ê³¼ì ì´ê³  êµ¬í˜„ ê°„ë‹¨
   - 90% ì„±ëŠ¥ ê°œì„ 
   - 30ë¶„ ë‚´ êµ¬í˜„ ê°€ëŠ¥

2. **2ë‹¨ê³„: í•„ìš”ì‹œ ë°©ì•ˆ D (Spatial Index) ì¶”ê°€**
   - 1ë‹¨ê³„ë¡œ ë¶€ì¡±í•œ ê²½ìš°ë§Œ
   - ì¶”ê°€ 10% ê°œì„ 

3. **ë°©ì•ˆ B, CëŠ” ë¹„ì¶”ì²œ**
   - B: ê·¼ë³¸ í•´ê²°ì±… ì•„ë‹˜
   - C: êµ¬í˜„ ë³µì¡ë„ ëŒ€ë¹„ íš¨ê³¼ ë¯¸ë¯¸

---

#### **ë°©ì•ˆ E: ê²½ìœ„ë„ ê¸°ë°˜ íˆíŠ¸ í…ŒìŠ¤íŠ¸ (ìµœì  ì†”ë£¨ì…˜) â­â­â­â­â­**

3D ë ˆì´ìºìŠ¤íŠ¸ë¥¼ ì™„ì „íˆ íšŒí”¼í•˜ê³  2D ê³µê°„ ê²€ìƒ‰ í™œìš©

**í•µì‹¬ ì•„ì´ë””ì–´:**
- R3Fì˜ `onPointerEnter` ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
- ë§ˆìš°ìŠ¤ ì¢Œí‘œ â†’ êµ¬ì²´ í‘œë©´ ê²½ìœ„ë„ ë³€í™˜
- R-treeë¡œ í›„ë³´ êµ­ê°€ ë¹ ë¥´ê²Œ í•„í„°ë§
- Point-in-Polygonìœ¼ë¡œ ì •í™•í•œ êµ­ê°€ ì‹ë³„

**ì„±ëŠ¥ ë¹„êµ:**
```javascript
// 3D ë ˆì´ìºìŠ¤íŠ¸ (í˜„ì¬)
ê²€ì‚¬ ëŒ€ìƒ: 256ê°œ geometry Ã— í‰ê·  1,979ê°œ ì‚¼ê°í˜• = 19,790ê°œ ì‚¼ê°í˜•
ì‹œê°„: ~5-10ms per frame

// ê²½ìœ„ë„ íˆíŠ¸ í…ŒìŠ¤íŠ¸ (ì œì•ˆ)
1. ë§ˆìš°ìŠ¤ â†’ ê²½ìœ„ë„ ë³€í™˜: ~0.1ms (ê°„ë‹¨í•œ ìˆ˜í•™)
2. R-tree ê²€ìƒ‰: ~0.01ms (logâ‚„(1,280) â‰ˆ 5ë²ˆ ë¹„êµ)
3. Point-in-Polygon: ~0.3ms (2-3ê°œ í›„ë³´ë§Œ)
ì´ ì‹œê°„: < 1ms per frame

ì„±ëŠ¥ í–¥ìƒ: ì•½ 10ë°°
```

**êµ¬í˜„ ë°©ì•ˆ:**
```typescript
import RBush from 'rbush';
import * as turf from '@turf/turf';

// 1. R-tree êµ¬ì¶• (ì´ˆê¸° 1íšŒ)
const spatialIndex = useMemo(() => {
  const tree = new RBush();
  
  const items = geoJson.features.map(feature => {
    const bbox = turf.bbox(feature); // [minLng, minLat, maxLng, maxLat]
    return {
      minX: bbox[0],
      minY: bbox[1],
      maxX: bbox[2],
      maxY: bbox[3],
      feature: feature,
    };
  });
  
  tree.load(items);
  return tree;
}, [geoJson]);

// 2. ë§ˆìš°ìŠ¤ â†’ ê²½ìœ„ë„ ë³€í™˜
const get3DPointFromMouse = (event, camera, canvas) => {
  const rect = canvas.getBoundingClientRect();
  const x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
  const y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
  
  const raycaster = new THREE.Raycaster();
  raycaster.setFromCamera(new THREE.Vector2(x, y), camera);
  
  // êµ¬ì²´ì™€ì˜ êµì°¨ì  êµ¬í•˜ê¸° (ë¹ ë¦„! ë‹¨ì¼ sphere ê²€ì‚¬)
  const sphere = new THREE.Sphere(new THREE.Vector3(0, 0, 0), 1);
  const intersectPoint = new THREE.Vector3();
  
  if (raycaster.ray.intersectSphere(sphere, intersectPoint)) {
    // 3D ì¢Œí‘œ â†’ ê²½ìœ„ë„ ë³€í™˜
    const lng = Math.atan2(intersectPoint.x, intersectPoint.z) * (180 / Math.PI);
    const lat = Math.asin(intersectPoint.y) * (180 / Math.PI);
    return { lng, lat };
  }
  
  return null;
};

// 3. ê²½ìœ„ë„ â†’ êµ­ê°€ ì°¾ê¸°
const findCountryAtPoint = (lng, lat) => {
  // R-treeë¡œ í›„ë³´ ë¹ ë¥´ê²Œ í•„í„°ë§
  const candidates = spatialIndex.search({
    minX: lng - 0.01, minY: lat - 0.01,
    maxX: lng + 0.01, maxY: lat + 0.01,
  });
  
  // Point-in-Polygon ì •ë°€ ê²€ì‚¬ (2-3ê°œ í›„ë³´ë§Œ)
  const point = turf.point([lng, lat]);
  
  for (const candidate of candidates) {
    if (turf.booleanPointInPolygon(point, candidate.feature)) {
      return candidate.feature;
    }
  }
  
  return null;
};

// 4. Canvas ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
<Canvas
  onPointerMove={(event) => {
    const coords = get3DPointFromMouse(event, camera, canvasRef.current);
    if (!coords) return;
    
    const country = findCountryAtPoint(coords.lng, coords.lat);
    setHoveredCountryId(country?.id || null);
  }}
>
```

**ì¥ì :**
- âœ… 3D ë ˆì´ìºìŠ¤íŠ¸ ì™„ì „ íšŒí”¼ (ê°€ì¥ í° ì´ì )
- âœ… 10ë°° ë¹ ë¥¸ ì„±ëŠ¥ (< 1ms)
- âœ… ì •í™•í•œ êµ­ê°€ ì‹ë³„ (GeoJSON ë°ì´í„° ê·¸ëŒ€ë¡œ)
- âœ… ê²€ì¦ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ (rbush, @turf/turf)
- âœ… íšŒì „/ì¤Œ ì‹œì—ë„ ì •í™•

**ë‹¨ì :**
- âš ï¸ ì¶”ê°€ ì˜ì¡´ì„± í•„ìš” (rbush ~7KB, @turf ~3KB)
- âš ï¸ ì´ˆê¸° R-tree êµ¬ì¶• ì‹œê°„ (~50-100ms, 1íšŒë§Œ)

**ì˜ì¡´ì„±:**
```bash
npm install rbush @turf/turf @turf/boolean-point-in-polygon
npm install -D @types/rbush
```

**R3F onPointerEnterì™€ì˜ ì°¨ì´:**
```typescript
// R3F ë°©ì‹ (ëŠë¦¼)
<mesh onPointerEnter={...}>  // ë‚´ë¶€ì ìœ¼ë¡œ ë ˆì´ìºìŠ¤íŠ¸ ì‚¬ìš©
  - 256ê°œ mesh ëª¨ë‘ ê²€ì‚¬
  - ê° meshì˜ ëª¨ë“  ì‚¼ê°í˜• ìˆœíšŒ
  - í”¼í•  ìˆ˜ ì—†ëŠ” êµ¬ì¡°

// ê²½ìœ„ë„ ë°©ì‹ (ë¹ ë¦„)
<Canvas onPointerMove={...}>  // ë ˆì´ìºìŠ¤íŠ¸ ì—†ì´ ì¢Œí‘œ ë³€í™˜ë§Œ
  - ë‹¨ì¼ sphere êµì°¨ ê²€ì‚¬ë§Œ
  - 2D ê³µê°„ ê²€ìƒ‰ (R-tree)
  - ì™„ì „íˆ ë‹¤ë¥¸ ì ‘ê·¼
```

**ì„±ëŠ¥ ë¶„ì„:**
```
ì¿¼ë“œíŠ¸ë¦¬ ê²€ìƒ‰: O(log n) = logâ‚„(1,280) â‰ˆ 5ë²ˆ ë¹„êµ = ìˆ˜ Î¼s
vs.
3D ë ˆì´ìºìŠ¤íŠ¸: O(n Ã— m) = 256 Ã— 1,979 â‰ˆ 19,790 ìˆœíšŒ = ìˆ˜ ms

ì°¨ì´: ì•½ 1,000ë°°
```

**ê¶Œì¥ ì´ìœ :**
1. **ê·¼ë³¸ì  í•´ê²°**: ë°©ì•ˆ AëŠ” ì‚¼ê°í˜• ìˆ˜ë¥¼ ì¤„ì´ëŠ” ê²ƒ, ë°©ì•ˆ EëŠ” ë ˆì´ìºìŠ¤íŠ¸ ìì²´ë¥¼ íšŒí”¼
2. **ë” ë¹ ë¥¸ ì„±ëŠ¥**: ë°©ì•ˆ A (90% ê°œì„ ) vs ë°©ì•ˆ E (1,000% ê°œì„ )
3. **ë©”ëª¨ë¦¬ íš¨ìœ¨**: ì¶”ê°€ ë©”ì‰¬ ë¶ˆí•„ìš”
4. **ì •í™•ì„±**: GeoJSON ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ ì •í™•í•œ êµ­ê°€ ê²½ê³„ íŒë‹¨

---

## ğŸ§ª ë¹ ë¥¸ ê²€ì¦ ë°©ë²•

### ë Œë”ëŸ¬ í†µê³„ í™•ì¸

**ëª©ì :** ë“œë¡œìš°ì½œ ìˆ˜ì™€ ì‚¼ê°í˜• ìˆ˜ ì¸¡ì •

```tsx
// HyperGlobe.tsxì— ì¶”ê°€
import { useFrame, useThree } from '@react-three/fiber';

export function HyperGlobe({ children, showFpsCounter, ...props }) {
  const { gl } = useThree();
  
  useFrame(() => {
    if (showFpsCounter) {
      console.log({
        drawCalls: gl.info.render.calls,
        triangles: gl.info.render.triangles,
        geometries: gl.info.memory.geometries,
        textures: gl.info.memory.textures,
      });
    }
  });
  
  // ... ê¸°ì¡´ ì½”ë“œ
}
```

**í™•ì¸ ì‚¬í•­:**
- `drawCalls`: ëª©í‘œ < 500, ìµœì í™” í›„ 512
- `triangles`: ìµœì í™” í›„ ì•½ 170,000

---

### Chrome DevTools í”„ë¡œíŒŒì¼ë§

**ëª©ì :** CPU ë³‘ëª© ì§€ì  í™•ì¸

1. Chrome DevTools ì—´ê¸° (F12)
2. Performance íƒ­ ì„ íƒ
3. ë…¹í™” ì‹œì‘ â†’ ì§€êµ¬ë³¸ íšŒì „ â†’ ë…¹í™” ì¢…ë£Œ
4. í™•ì¸ ì‚¬í•­:
   - í”„ë ˆì„ë‹¹ ì‹œê°„ (ëª©í‘œ: < 16.6ms)
   - JavaScript ì‹¤í–‰ ì‹œê°„
   - Rendering ì‹œê°„
   - `triangulatePolygon` í•¨ìˆ˜ ì‹¤í–‰ ì‹œê°„

---

## ğŸ“Š ì„±ëŠ¥ ê°œì„  íš¨ê³¼ (ì‹¤ì œ ì¸¡ì •)

### ìµœì í™” ì „í›„ ë¹„êµ (world-high ê¸°ì¤€)

| ì§€í‘œ | ìµœì í™” ì „ | RegionFeature ë³‘í•© í›„ | ëª©í‘œ |
|------|----------|---------------------|------|
| **FPS** | 40 | 58-60 âœ… | 60 |
| **ë“œë¡œìš°ì½œ** | 2,055 | 512 âœ… | < 500 |
| **ì§€ì˜¤ë©”íŠ¸ë¦¬** | 1,382 | 548 âœ… | < 600 |
| **ì‚¼ê°í˜• ìˆ˜** | 230,446 | 76,768 âœ… | < 100k |
| **ì´ˆê¸° ë¡œë”©** | 2-3ì´ˆ | 1-2ì´ˆ | < 1ì´ˆ |
| **êµ­ê°€ë³„ ì œì–´** | âœ… | âœ… | í•„ìˆ˜ |

### ë‹¬ì„±ëœ ê°œì„ 
```
âœ… FPS: 40 â†’ 58-60 (45% í–¥ìƒ)
âœ… ë“œë¡œìš°ì½œ: 2,055 â†’ 512 (75% ê°ì†Œ)
âœ… ì§€ì˜¤ë©”íŠ¸ë¦¬: 1,382 â†’ 548 (60% ê°ì†Œ)
âœ… ì‚¼ê°í˜•: 230k â†’ 76k (67% ê°ì†Œ)
âœ… ë§µì°¨íŠ¸ ê¸°ëŠ¥ ì™„ì „ ìœ ì§€
```

### ì¶”ê°€ ìµœì í™” ê°€ëŠ¥ì„± (ë¡œë“œë§µ)

| ìµœì í™” | í˜„ì¬ | ì ìš© í›„ | ê°œì„  í•­ëª© | ìš°ì„ ìˆœìœ„ |
|--------|------|---------|-----------|----------|
| **ê¸°ë³¸** | 58-60 fps, 1-2ì´ˆ ë¡œë”© | - | - | âœ… ì™„ë£Œ |
| **í¬ì¸í„° ì´ë²¤íŠ¸** | ë¹„í™œì„±í™” | 60 fps | hover ë³µì› | â­â­â­â­â­ í•„ìˆ˜ |
| **HGM í¬ë§·** | 1-2ì´ˆ ë¡œë”© | 0.3ì´ˆ ë¡œë”© | 25ë°° ë¹ ë¦„ | â­â­â­â­ ê¶Œì¥ |

**ì ìš© ìˆœì„œ:**
```
1ë‹¨ê³„ (í•„ìˆ˜): í¬ì¸í„° ì´ë²¤íŠ¸ ìµœì í™”
   â†’ êµ­ê°€ hover ê¸°ëŠ¥ ë³µì›
   â†’ ë§µì°¨íŠ¸ë¡œì„œ ì™„ì „í•œ ê¸°ëŠ¥ í™•ë³´

2ë‹¨ê³„ (ê¶Œì¥): HGM í¬ë§· êµ¬í˜„
   â†’ ì´ˆê¸° ë¡œë”© 25ë°° ê°œì„ 
   â†’ ì‚¬ìš©ì ê²½í—˜ ê·¹ëŒ€í™”
```

---

## ğŸ¯ ìµœì í™” ì ìš© í˜„í™©

### âœ… Phase 1: RegionFeature ë³‘í•© ìµœì í™” (ì™„ë£Œ)
1. âœ… RegionFeature ë‚´ë¶€ ë§ ë³‘í•© êµ¬í˜„
2. âœ… LineSegmentsë¡œ ì™¸ê³½ì„  ë³‘í•©
3. âœ… ë©€í‹°í´ë¦¬ê³¤ ì§€ì›
4. âœ… êµ­ê°€ë³„ hover/ìŠ¤íƒ€ì¼ ë³€ê²½ ìœ ì§€
5. âœ… FPS Counter ì¶”ê°€
6. âœ… ì„±ëŠ¥ ì¸¡ì • ë° ê²€ì¦ ì™„ë£Œ

**ê²°ê³¼:**
- ë“œë¡œìš°ì½œ 75% ê°ì†Œ
- FPS 45% í–¥ìƒ
- ë§µì°¨íŠ¸ ê¸°ëŠ¥ ì™„ì „ ìœ ì§€

---

### ğŸ”œ Phase 2: ì¶”ê°€ ìµœì í™” (ì„ íƒì )

í˜„ì¬ ì„±ëŠ¥ì´ ëª©í‘œ(58-60fps)ë¥¼ ë‹¬ì„±í–ˆìœ¼ë‚˜, **í¬ì¸í„° ì´ë²¤íŠ¸ê°€ ë¹„í™œì„±í™”**ë˜ì–´ ìˆìŒ

#### **ìš°ì„ ìˆœìœ„ 1: í¬ì¸í„° ì´ë²¤íŠ¸ ìµœì í™” (ê²½ìœ„ë„ ê¸°ë°˜)** â­â­â­â­â­ (í•„ìˆ˜, ìµœì )
   - ëª©ì : êµ­ê°€ hover ê¸°ëŠ¥ ë³µì›
   - ë°©ë²•: ê²½ìœ„ë„ ê¸°ë°˜ íˆíŠ¸ í…ŒìŠ¤íŠ¸ (ë°©ì•ˆ E)
   - ê¸°ëŒ€ íš¨ê³¼: 3D ë ˆì´ìºìŠ¤íŠ¸ ì™„ì „ íšŒí”¼, 10ë°° ë¹ ë¥¸ ì„±ëŠ¥
   - ì„±ëŠ¥: < 1ms per frame
   - ë§µì°¨íŠ¸ ê¸°ëŠ¥ ì˜í–¥: **í•µì‹¬ ê¸°ëŠ¥ í™œì„±í™”**
   - êµ¬í˜„ ë‚œì´ë„: ì¤‘ê°„ (2-3ì‹œê°„)
   - ì¶”ê°€ ë¹„ìš©: rbush (~7KB), @turf (~3KB)
   
   **ëŒ€ì•ˆ: ê°„ì†Œí™” ì¶©ëŒ ë©”ì‰¬ (ë°©ì•ˆ A)** â­â­â­â­
   - ë°©ë²•: ì €í•´ìƒë„ geometryë¡œ ë ˆì´ìºìŠ¤íŠ¸
   - ê¸°ëŒ€ íš¨ê³¼: ë ˆì´ìºìŠ¤íŠ¸ ë¹„ìš© 90% ê°ì†Œ
   - êµ¬í˜„ ë‚œì´ë„: ë‚®ìŒ (30ë¶„)
   - ì¶”ê°€ ë¹„ìš©: ë©”ëª¨ë¦¬ ~20% ì¦ê°€

#### **ìš°ì„ ìˆœìœ„ 2: HGM í¬ë§· (ë¹Œë“œ íƒ€ì„ ì „ì²˜ë¦¬)** â­â­â­â­ (ê¶Œì¥)
   - ëª©ì : ì´ˆê¸° ë¡œë”© 25ë°° ê°œì„  (2-7ì´ˆ â†’ 0.3ì´ˆ)
   - ë°©ë²•: ì´ì§„ íŒŒì¼ í¬ë§· + ì‚¼ê°ë¶„í• /ì¢Œí‘œë³€í™˜ ì „ì²˜ë¦¬
   - íŒŒì¼ í¬ê¸°: 1.16MB â†’ 0.8MB (30% ê°ì†Œ)
   - ë§µì°¨íŠ¸ ê¸°ëŠ¥ ì˜í–¥: ì—†ìŒ (API ê°œì„ )
   - êµ¬í˜„ ë‚œì´ë„: ë†’ìŒ (1-2ì£¼)
   - ì¶”ê°€ íš¨ê³¼: 
     - CLI ë„êµ¬ë¡œ ì»¤ìŠ¤í…€ ë§µ ì œì‘ ê°€ëŠ¥
     - ì‚¬ì „ ì œì‘ ë§µ íŒ© ì œê³µ
     - í”„ë¡œë•ì…˜ê¸‰ ì™„ì„±ë„

---

### âŒ Phase 3: ì ìš© ë¶ˆê¶Œì¥

1. **ì „ì²´ ë©”ì‰¬ ë³‘í•©**
   - ì´ìœ : ë§µì°¨íŠ¸ ê¸°ëŠ¥ ì œì•½ (êµ­ê°€ë³„ ì œì–´ ë³µì¡)
   - ì„±ëŠ¥ ì´ë“: ë¯¸ë¯¸ (ì´ë¯¸ 60fps ë‹¬ì„±)
   - ê²°ë¡ : ì ìš© ë¶ˆí•„ìš”

---

## ğŸ“š ì°¸ê³  ìë£Œ

### Three.js ì„±ëŠ¥ ìµœì í™”
- [Three.js Performance Tips](https://discoverthreejs.com/tips-and-tricks/)
- [BufferGeometryUtils ë¬¸ì„œ](https://threejs.org/docs/#examples/en/utils/BufferGeometryUtils)
- [InstancedMesh ê°€ì´ë“œ](https://threejs.org/docs/#api/en/objects/InstancedMesh)

### ì‚¼ê°ë¶„í•  ì•Œê³ ë¦¬ì¦˜
- [Delaunator ë¼ì´ë¸ŒëŸ¬ë¦¬](https://github.com/mapbox/delaunator)
- [Polygon Triangulation on Globe - Stack Overflow](https://stackoverflow.com/questions/54484537/polygon-triangulation-for-globe)

### ì„±ëŠ¥ ì¸¡ì •
- [Chrome DevTools Performance](https://developer.chrome.com/docs/devtools/performance/)
- [React-three-fiber Performance](https://docs.pmnd.rs/react-three-fiber/advanced/pitfalls#performance-pitfalls)

---

## ğŸ“ í•µì‹¬ êµí›ˆ

### ìµœì í™” ì›ì¹™

1. **API í˜¸í™˜ì„± ìš°ì„ **
   - ì‚¬ìš©ì ì½”ë“œ ë³€ê²½ ì—†ì´ ë‚´ë¶€ ìµœì í™”
   - RegionFeature API ì™„ì „ ìœ ì§€
   
2. **ê¸°ëŠ¥ê³¼ ì„±ëŠ¥ì˜ ê· í˜•**
   - ë§µì°¨íŠ¸ë¡œì„œì˜ ë™ì  ê¸°ëŠ¥ ë³´ì¡´
   - êµ­ê°€ë³„ hover, ìƒ‰ìƒ ë³€ê²½ ê°€ëŠ¥
   
3. **ì ì§„ì  ê°œì„ **
   - í° ë¦¬íŒ©í† ë§ ì—†ì´ 75% ì„±ëŠ¥ ê°œì„ 
   - ë¦¬ìŠ¤í¬ ìµœì†Œí™”
   
4. **ì¸¡ì • ê¸°ë°˜ ìµœì í™”**
   - FPS Counter ì¶”ê°€ë¡œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
   - ë“œë¡œìš°ì½œ, ì§€ì˜¤ë©”íŠ¸ë¦¬ ìˆ˜ ì¸¡ì •

### ì„±ê³µ ìš”ì¸

âœ… **RegionFeature ë ˆë²¨ì—ì„œ ë³‘í•©**
- êµ­ê°€ë³„ ë…ë¦½ì„± ìœ ì§€
- ë‚´ë¶€ ë§ë§Œ ë³‘í•©í•˜ì—¬ ë“œë¡œìš°ì½œ ê°ì†Œ
- ë©€í‹°í´ë¦¬ê³¤ ì™„ë²½ ì§€ì›

âœ… **LineSegments í™œìš©**
- ë–¨ì–´ì§„ ì„¬ë“¤ ê°ê° ë‹«íŒ ë£¨í”„ë¡œ ì²˜ë¦¬
- í•˜ë‚˜ì˜ ë“œë¡œìš°ì½œë¡œ ëª¨ë“  ì™¸ê³½ì„  ë Œë”ë§

âš ï¸ **ì˜ˆìƒì¹˜ ëª»í•œ íŠ¸ë ˆì´ë“œì˜¤í”„ ë°œê²¬**
- ë“œë¡œìš°ì½œ ê°ì†ŒëŠ” ë Œë”ë§ ì„±ëŠ¥ í–¥ìƒ
- í•˜ì§€ë§Œ ì§€ì˜¤ë©”íŠ¸ë¦¬ ë³‘í•©ìœ¼ë¡œ ë ˆì´ìºìŠ¤íŠ¸ ë¹„ìš© ì¦ê°€
- ê° ì§€ì˜¤ë©”íŠ¸ë¦¬ë‹¹ ì‚¼ê°í˜• ìˆ˜: 350 â†’ 1,979 (5.6ë°°)
- í¬ì¸í„° ì´ë²¤íŠ¸ ë¹„í™œì„±í™” í•„ìš”

### ë°°ìš´ êµí›ˆ

1. **ìµœì í™”ì—ëŠ” í•­ìƒ íŠ¸ë ˆì´ë“œì˜¤í”„ê°€ ìˆë‹¤**
   - ë“œë¡œìš°ì½œ ê°ì†Œ â‰  ëª¨ë“  ì„±ëŠ¥ í–¥ìƒ
   - ë ˆì´ìºìŠ¤íŠ¸ ë¹„ìš©ì€ ì˜¤íˆë ¤ ì¦ê°€
   
2. **ë¬¸ì œëŠ” ìˆ¨ì–´ìˆì„ ìˆ˜ ìˆë‹¤**
   - ìµœì í™” ì „: ì´ˆê¸° ë¡œë”© ë¸”ë¡œí‚¹ìœ¼ë¡œ í¬ì¸í„° ì´ë²¤íŠ¸ í…ŒìŠ¤íŠ¸ ë¶ˆê°€
   - ìµœì í™” í›„: ë¹„ë¡œì†Œ ë ˆì´ìºìŠ¤íŠ¸ ë¬¸ì œ ë°œê²¬
   
3. **ì¸¡ì •ì´ í•µì‹¬ì´ë‹¤**
   - FPSë§Œìœ¼ë¡œëŠ” ë¶€ì¡±
   - ë“œë¡œìš°ì½œ, ì§€ì˜¤ë©”íŠ¸ë¦¬ ìˆ˜, ì‚¼ê°í˜• ìˆ˜, ë ˆì´ìºìŠ¤íŠ¸ ë¹„ìš© ëª¨ë‘ ì¸¡ì •
   
4. **ê·¼ë³¸ì  í•´ê²°ì±…ì„ ì°¾ì•„ë¼**
   - ë°©ì•ˆ A: ì‚¼ê°í˜• ìˆ˜ ì¤„ì´ê¸° (90% ê°œì„ )
   - ë°©ì•ˆ E: ë ˆì´ìºìŠ¤íŠ¸ ìì²´ íšŒí”¼ (1,000% ê°œì„ )
   - ë¬¸ì œì˜ ì›ì¸ì„ ì œê±°í•˜ëŠ” ê²ƒì´ ìµœì„ 
   
5. **ì°¨ì›ì„ ë°”ê¾¸ë©´ ë¬¸ì œê°€ ì‰¬ì›Œì§„ë‹¤**
   - 3D ë ˆì´ìºìŠ¤íŠ¸: 19,790ê°œ ì‚¼ê°í˜• ìˆœíšŒ
   - 2D ê³µê°„ ê²€ìƒ‰: 5ë²ˆ ë¹„êµë¡œ ë
   - ê°™ì€ ë¬¸ì œ, ë‹¤ë¥¸ ì ‘ê·¼

---

## ğŸ¤ ë‹¤ìŒ ë‹¨ê³„

### í˜„ì¬ ìƒíƒœ: ë¶€ë¶„ ë‹¬ì„± âš ï¸
- âœ… FPS: 58-60 (ëª©í‘œ ë‹¬ì„±)
- âœ… ë“œë¡œìš°ì½œ: 512 (ê¶Œì¥ ë²”ìœ„ ë‚´)
- âš ï¸ **í¬ì¸í„° ì´ë²¤íŠ¸: ë¹„í™œì„±í™”ë¨**
- âš ï¸ ë§µì°¨íŠ¸ ê¸°ëŠ¥: ì œí•œì  (hover ë¶ˆê°€)

### í•„ìˆ˜ ê°œì„ ì‚¬í•­
1. **í¬ì¸í„° ì´ë²¤íŠ¸ ìµœì í™” (ê²½ìœ„ë„ ê¸°ë°˜ íˆíŠ¸ í…ŒìŠ¤íŠ¸ ê¶Œì¥)**
   - ìµœì : ê²½ìœ„ë„ ê¸°ë°˜ (< 1ms, 10ë°° ë¹ ë¦„)
   - ëŒ€ì•ˆ: ê°„ì†Œí™” ì¶©ëŒ ë©”ì‰¬ (90% ê°œì„ )
   - êµ­ê°€ hover ê¸°ëŠ¥ ë³µì›
   - ë§µì°¨íŠ¸ë¡œì„œ ì™„ì „í•œ ê¸°ëŠ¥ í™•ë³´

### ì„ íƒì  ê°œì„ ì‚¬í•­
1. **HGM í¬ë§· (ë¹Œë“œ íƒ€ì„ ì „ì²˜ë¦¬)**
   - ì´ˆê¸° ë¡œë”© 25ë°° ê°œì„ 
   - íŒŒì¼ í¬ê¸° 30% ê°ì†Œ
   - CLI ë„êµ¬ ë° ë§µ íŒ© ìƒíƒœê³„

### êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

**Phase 1: í¬ì¸í„° ì´ë²¤íŠ¸ (ê²½ìœ„ë„ ë°©ì‹)**
```bash
# 1. ì˜ì¡´ì„± ì„¤ì¹˜
npm install rbush @turf/turf @turf/boolean-point-in-polygon
npm install -D @types/rbush

# 2. êµ¬í˜„ ë‹¨ê³„
- [ ] R-tree ì¸ë±ìŠ¤ ìƒì„± (HyperGlobe)
- [ ] ë§ˆìš°ìŠ¤ â†’ ê²½ìœ„ë„ ë³€í™˜ í•¨ìˆ˜
- [ ] ê²½ìœ„ë„ â†’ êµ­ê°€ ì°¾ê¸° í•¨ìˆ˜
- [ ] Canvas onPointerMove ì¶”ê°€
- [ ] hoveredCountryId state ê´€ë¦¬
- [ ] RegionFeatureì— prop ì „ë‹¬
```

**Phase 2: HGM í¬ë§· (ì„ íƒì )**
```bash
# 1. ì „ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- [ ] GeoJSON íŒŒì‹±
- [ ] ì‚¼ê°ë¶„í•  ìˆ˜í–‰
- [ ] ì¢Œí‘œ íˆ¬ì˜
- [ ] HGM ì´ì§„ ì§ë ¬í™”
- [ ] gzip ì••ì¶•

# 2. ì—­ì§ë ¬í™” êµ¬í˜„
- [ ] HGM íŒŒì¼ ë¡œë“œ
- [ ] ì´ì§„ íŒŒì‹±
- [ ] BufferGeometry ìƒì„±

# 3. API ê°œì„ 
- [ ] HyperGlobe mapData prop
- [ ] ìë™ RegionFeature ìƒì„±
- [ ] ë¡œë”© ìƒíƒœ ê´€ë¦¬

# 4. CLI ë„êµ¬ (ì„ íƒ)
- [ ] @hyperglobe/cli íŒ¨í‚¤ì§€
- [ ] convert ëª…ë ¹ì–´
- [ ] ê²€ì¦ ë° ìµœì í™” ì˜µì…˜
```

---

*ë¬¸ì„œ ìµœì¢… ìˆ˜ì •ì¼: 2025ë…„ 11ì›” 6ì¼*
*ìµœì í™” ì™„ë£Œ: RegionFeature ë³‘í•© (v1.0)*
*í…ŒìŠ¤íŠ¸ í™˜ê²½: M1 MacBook, world-high.geo.json*
