import {
  Meta,
  Description,
  Canvas,
  Title,
  Heading,
  Subheading,
  PureArgsTable,
  Story,
  Controls,
} from '@storybook/addon-docs/blocks';
import { HyperGlobe } from './hyperglobe';
import * as HyperGlobeExamples from './hyperglobe.stories';

<Meta title="Components/HyperGlobe" of={HyperGlobeExamples} />

<Title>HyperGlobe</Title>

<Description of={HyperGlobe} />

### 사용 예시

- 실제 코드는 Show code 버튼을 눌러 확인할 수 있습니다.

<Canvas of={HyperGlobeExamples.Intro} />

<br />

## HGM 파일

- HyperGlobe 전용 지도 파일 형식입니다.
- `HyperGlobe/Cli` 도구를 사용하여 GeoJSON 파일을 HGM 파일로 변환할 수 있습니다.
- Three.js의 3D 구체 위에 피쳐를 그리기 위해 삼각분할 작업이 필요한데, HGM파일은 이 과정을 미리 처리하여 빠른 렌더링을 가능하게 합니다.
- 만약 HyperGlobe에 그리고 싶은 지도가 따로 있다면, GeoJSON 파일을 준비한 후 `HyperGlobe/Cli`를 사용하여 HGM 파일로 변환하세요.

### HyperGlobe/Cli 사용법

```bash
npx @hyperglobe/cli convert -i path/to/input.geojson -o path/to/output.hgm
```

- `-i` 옵션을 통해 입력 GeoJSON 파일 경로를 지정합니다.
- `-o` 옵션을 통해 출력 HGM 파일 경로를 지정합니다.
- 변환된 HGM 파일을 HyperGlobe 컴포넌트의 `hgmUrl` 속성에 전달하여 사용할 수 있습니다.
- HyperGlobe는 hgmUrl경로로 fetch 요청을 보내서 HGM파일을 불러옵니다.

### 기본 제공 지도

- HyperGlobe는 CDN을 통해 기본 HGM 지도를 제공합니다.
- 국가별 세계지도를 사용하려면 `hgmUrl` 속성에 다음 URL을 지정하세요:

```plaintext
https://cdn.jsdelivr.net/npm/@hyperglobe/maps@latest/nations-mid.hgm
```

<br />

## HyperGlobe 주요 속성

### hgmUrl

- HGM 파일의 URL을 지정합니다.
- 예: `/maps/nations-mid.hgm`
- HyperGlobe는 이 URL로 fetch 요청을 보내서 HGM 파일을 불러옵니다.
- HGM 파일을 로드할 때 까지, 로딩 인디케이터가 표시됩니다.

### 지구본(Globe)

- globe 옵션을 통해 지구본의 스타일을 설정할 수 있습니다.

<Canvas of={HyperGlobeExamples.Globe} />

### 사이즈

- `size` 속성으로 지구본의 크기를 조절할 수 있습니다.
- 슬라이더를 움직여 크기 변화를 확인해보세요.

<Canvas of={HyperGlobeExamples.Size} />
<Controls of={HyperGlobeExamples.Size} />

### 카메라

- `camera` 속성으로 카메라의 초기 위치를 설정할 수 있습니다.

<Canvas of={HyperGlobeExamples.Camera} />
<Controls of={HyperGlobeExamples.Camera} />

- min, maxDistance 속성으로 카메라의 최소/최대 거리를 설정할 수 있습니다.
- initialPosition 속성으로 카메라의 초기 위치를 설정할 수 있습니다. 값은 경위도 좌표로 설정하면 됩니다.
- 위의 예제에선 서울의 경위도 좌표(37.5665, 126.9780)를 사용했습니다.

### 컨트롤

- `controls` 속성으로 지구본의 조작 가능 여부를 설정할 수 있습니다.

<Canvas of={HyperGlobeExamples.Control} />
<Controls of={HyperGlobeExamples.Control} />
